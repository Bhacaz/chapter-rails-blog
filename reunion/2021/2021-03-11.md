---
layout: default
title: 3 mars 2021
parent: 2021
grand_parent: Réunion
nav_order: 4
---

# 3 mars 2021

## Tour de table

https://towardsdatascience.com/deep-dive-into-querying-elasticsearch-filter-vs-query-full-text-search-b861b06bd4c0

un exemple de `:on_death` dans Sidekiq::Batch worker:
Au moment d creation d'une nouvelle période, on utilise cache pour empecher le client de envoyer plusieur commande. On donne le CreatePeriodWorker la possibilité d avoir plusiers `try`. À la fin de la proces ou en cas d certaines problems on clear le cache. Mais dans le cas d un erreur pendant Duplication de derinier period on doit  s'assurer que le cache sera cleared quand dernier `try` et fait et que worker tombe parmis les DEAD jobs.
- BatchWorker: app/workers/schedule/create_period_batch_worker.rb 
- CallBack: app/workers/callbacks/clear_cache_after_period_creation_worker_callback.rb
