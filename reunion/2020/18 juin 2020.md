---
layout: default
title: 18 juin 2020
parent: 2020
grand_parent: R√©union
nav_order: 11
---

# 18 juin 2020

## Tour de table

## `belongs_to_required_by_default`

Avant Rails 5, les `belongs_to` √©taient optionel par d√©faut. Quand on cr√©e un model,
plus souvent qu'autrement
 les *foreign_key* sont n√©cessaire. On met `null: false` dans les migrations et des validations `presence: true`
 sur les *foreign_key* dans les mod√®les. (Personnellement, se connaisait pas l'option `required: true`).
 
 > Almost every belongs_to declaration seems to be a 
 > required association. It's rare that you allow your foreign key to be nil. 
 > So let's have required: true be the default and required: false be the optional turn-off.
 >  
 > *DHH* [rails/rails#18233](https://github.com/rails/rails/issues/18233), [rails/rails#18937](https://github.com/rails/rails/pull/18937)

Donc a la cr√©ation d'une nouvelle app en Rails 5, `required: true` √©tait l'option par d√©faut.
Quand on upgrade de 4 => 5 il n'y pas de changement, `required: false` est toujours par d√©faut. 
Rails 5.1 nous force maintenant
a utiliser `config.active_record.belongs_to_required_by_default = true` si on veut continuer
√† utiliser l'ancien option par d√©faut.

Autre point en Rails 5, `required: true` devient `optional: false`.

Les travaux sont maintenant terminer, par d√©faut les `belongs_to` sont `optional: false`.

* [petalmd/petalmd.rails#5644](https://github.com/petalmd/petalmd.rails/pull/5644)
* [petalmd/petalmd.rails#5654](https://github.com/petalmd/petalmd.rails/pull/5654)

## [Outdated gems Issue](https://github.com/petalmd/petalmd.rails/issues/5633)

Pour ne pas arriver dans quelque mois/ann√©es et avoir 70+ gems en retard, voici un Github
Issue qui r√©pertorie les gems qui peuvent √™tre updater √† partir de la commande

```bash
bundle outdated --only-explicit --strict
```

### Comment √ßa fonctionne

* C'est un Github Action qui est trigger √† chaque merge dans master
* Un script Ruby ex√©cute la commande de bundler
* Parse le r√©sultat en markdown
* Et update la description de l'issue

Le repo du script [Bhacaz/bundler-outdated-action](https://github.com/Bhacaz/bundler-outdated-action)

Si vous avez d'autre id√©e d'action... Il y a le [Marketplace de Github](https://github.com/marketplace?type=actions)
ou vous pouvez en cr√©er un. Example g√©n√©rer de la docs swagger pour l'api ü§∑‚Äç‚ôÇÔ∏è.

